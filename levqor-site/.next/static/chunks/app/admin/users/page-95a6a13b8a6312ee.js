(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{3458:function(e,t,s){Promise.resolve().then(s.bind(s,3058))},3058:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),l=s(2265);function n(){let[e,t]=(0,l.useState)(null),[s,n]=(0,l.useState)(!0),[o,d]=(0,l.useState)(1),[x,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(""),[p,j]=(0,l.useState)(null),[b,f]=(0,l.useState)(!1);async function g(){n(!0);try{let e=localStorage.getItem("admin_token")||"",s=new URLSearchParams({page:String(o),limit:"20"});x&&s.set("plan",x),h&&s.set("status",h);let a=await fetch("".concat("https://api.levqor.ai","/api/admin/users?").concat(s),{headers:{Authorization:"Bearer ".concat(e)}});a.ok&&t(await a.json())}catch(e){console.error("Failed to fetch users:",e)}finally{n(!1)}}async function N(e){f(!0);try{let t=localStorage.getItem("admin_token")||"",s=await fetch("".concat("https://api.levqor.ai","/api/admin/users/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let e=await s.json();j(e.user)}}catch(e){console.error("Failed to fetch user detail:",e)}finally{f(!1)}}return(0,l.useEffect)(()=>{g()},[o,x,h]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"User Management"}),(0,a.jsx)("p",{className:"text-slate-400 mt-1",children:"View user accounts and subscription status (READ-ONLY)"})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsxs)("select",{value:x,onChange:e=>{u(e.target.value),d(1)},className:"bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-white",children:[(0,a.jsx)("option",{value:"",children:"All Plans"}),(0,a.jsx)("option",{value:"free",children:"Free"}),(0,a.jsx)("option",{value:"starter",children:"Starter"}),(0,a.jsx)("option",{value:"launch",children:"Launch"}),(0,a.jsx)("option",{value:"growth",children:"Growth"}),(0,a.jsx)("option",{value:"agency",children:"Agency"})]}),(0,a.jsxs)("select",{value:h,onChange:e=>{m(e.target.value),d(1)},className:"bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-white",children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"trialing",children:"Trialing"}),(0,a.jsx)("option",{value:"past_due",children:"Past Due"}),(0,a.jsx)("option",{value:"canceled",children:"Canceled"})]})]}),(0,a.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-slate-800/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left text-slate-400 text-sm font-medium px-4 py-3",children:"Email"}),(0,a.jsx)("th",{className:"text-left text-slate-400 text-sm font-medium px-4 py-3",children:"Plan"}),(0,a.jsx)("th",{className:"text-left text-slate-400 text-sm font-medium px-4 py-3",children:"Status"}),(0,a.jsx)("th",{className:"text-left text-slate-400 text-sm font-medium px-4 py-3",children:"Created"}),(0,a.jsx)("th",{className:"text-left text-slate-400 text-sm font-medium px-4 py-3",children:"Last Seen"}),(0,a.jsx)("th",{className:"text-left text-slate-400 text-sm font-medium px-4 py-3",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:"Loading..."})}):(null==e?void 0:e.users)&&e.users.length>0?e.users.map(e=>(0,a.jsxs)("tr",{className:"border-t border-slate-800 hover:bg-slate-800/30",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-white",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(r,{plan:e.plan})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(i,{status:e.status})}),(0,a.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm",children:e.last_seen_at?new Date(e.last_seen_at).toLocaleDateString():"Never"}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("button",{onClick:()=>N(e.id),className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Details"})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:"No users found"})})})]})}),e&&e.pages>1&&(0,a.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 border-t border-slate-800",children:[(0,a.jsxs)("span",{className:"text-slate-400 text-sm",children:["Showing ",(o-1)*(e.limit||20)+1," - ",Math.min(o*(e.limit||20),e.total)," of ",e.total]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===o,className:"px-3 py-1 bg-slate-800 text-white rounded disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>d(t=>Math.min(e.pages,t+1)),disabled:o===e.pages,className:"px-3 py-1 bg-slate-800 text-white rounded disabled:opacity-50",children:"Next"})]})]})]}),p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>j(null),children:(0,a.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"User Details"}),(0,a.jsx)("button",{onClick:()=>j(null),className:"text-slate-400 hover:text-white",children:"âœ•"})]}),b?(0,a.jsx)("div",{className:"py-8 text-center text-slate-400",children:"Loading..."}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(c,{label:"Email",value:p.email}),(0,a.jsx)(c,{label:"Plan",value:(0,a.jsx)(r,{plan:p.plan})}),(0,a.jsx)(c,{label:"Status",value:(0,a.jsx)(i,{status:p.status})}),(0,a.jsx)(c,{label:"Workflows",value:String(p.workflows_count)}),(0,a.jsx)(c,{label:"Stripe Connected",value:p.has_stripe?"Yes":"No"}),(0,a.jsx)(c,{label:"Created",value:p.created_at?new Date(p.created_at).toLocaleDateString():"N/A"}),(0,a.jsx)(c,{label:"Last Seen",value:p.last_seen_at?new Date(p.last_seen_at).toLocaleDateString():"Never"})]}),(0,a.jsx)("div",{className:"mt-6 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:(0,a.jsx)("p",{className:"text-yellow-400 text-xs",children:"This is a read-only view. User modifications are not available from this dashboard."})})]})})]})}function r(e){let{plan:t}=e,s={free:"bg-slate-500/20 text-slate-400",starter:"bg-blue-500/20 text-blue-400",launch:"bg-green-500/20 text-green-400",growth:"bg-purple-500/20 text-purple-400",agency:"bg-orange-500/20 text-orange-400"};return(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(s[t.toLowerCase()]||s.free),children:t.toUpperCase()})}function i(e){let{status:t}=e,s={active:"bg-green-500/20 text-green-400",trialing:"bg-blue-500/20 text-blue-400",past_due:"bg-red-500/20 text-red-400",canceled:"bg-slate-500/20 text-slate-400",free:"bg-slate-500/20 text-slate-400"};return(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(s[t.toLowerCase()]||s.free),children:t.toUpperCase()})}function c(e){let{label:t,value:s}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-slate-400",children:t}),(0,a.jsx)("span",{className:"text-white",children:s})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=3458)}),_N_E=e.O()}]);