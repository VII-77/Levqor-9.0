(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3551],{6754:function(e,t,s){Promise.resolve().then(s.bind(s,2274))},2274:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var l=s(7437),a=s(2265),n=s(1290);function i(){var e,t,s,i,o,d,x,u;let[h,m]=(0,a.useState)(null),[p,b]=(0,a.useState)(null),[j,g]=(0,a.useState)(!0),[f,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(null);async function y(){try{let e=(0,n.r)(),t=localStorage.getItem("admin_token")||"",[s,l]=await Promise.all([fetch("".concat(e,"/api/health/summary")).catch(()=>null),fetch("".concat(e,"/api/admin/autopilot-status"),{headers:{Authorization:"Bearer ".concat(t)}}).catch(()=>null)]);if((null==s?void 0:s.ok)&&m(await s.json()),null==l?void 0:l.ok){let e=await l.json();b(e.autopilot)}}catch(e){console.error("Failed to fetch status:",e)}finally{g(!1)}}async function k(){v(!0),w(null);try{let e=(0,n.r)(),t=localStorage.getItem("admin_token")||"",s=await fetch("".concat(e,"/api/admin/health-check"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(s.ok){let e=await s.json();w(e.output||"Health check completed"),y()}else w("Health check failed")}catch(e){w("Error running health check")}finally{v(!1)}}return((0,a.useEffect)(()=>{y()},[]),j)?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Founder Command Console"}),(0,l.jsx)("p",{className:"text-slate-400 mt-1",children:"System controls and monitoring"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83C\uDFE5"})," Health Summary"]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(r,{label:"Application",ok:null!==(t=null==h?void 0:h.app_up)&&void 0!==t&&t}),(0,l.jsx)(r,{label:"Database",ok:null!==(s=null==h?void 0:h.db_ok)&&void 0!==s&&s}),(0,l.jsx)(r,{label:"Stripe",ok:null!==(i=null==h?void 0:h.stripe_ok)&&void 0!==i&&i}),(0,l.jsx)("div",{className:"pt-2 border-t border-slate-800 mt-2",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Overall Status"}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat((null==h?void 0:h.status)==="healthy"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"),children:(null==h?void 0:null===(e=h.status)||void 0===e?void 0:e.toUpperCase())||"UNKNOWN"})]})})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDEE1️"})," Guardian-Autopilot Mode"]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(c,{name:"Guardian Monitor",active:null!==(o=null==p?void 0:p.guardian_active)&&void 0!==o&&o}),(0,l.jsx)(c,{name:"Growth Engine",active:null!==(d=null==p?void 0:p.growth_engine_active)&&void 0!==d&&d}),(0,l.jsx)(c,{name:"Compliance Monitor",active:null!==(x=null==p?void 0:p.compliance_active)&&void 0!==x&&x}),(0,l.jsxs)("div",{className:"pt-2 border-t border-slate-800 mt-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Pending Approvals"}),(0,l.jsx)("span",{className:"text-white font-semibold",children:null!==(u=null==p?void 0:p.pending_approvals)&&void 0!==u?u:0})]}),(null==p?void 0:p.last_health_check)&&(0,l.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Last Check"}),(0,l.jsx)("span",{className:"text-slate-300 text-sm",children:p.last_health_check})]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6 mb-8",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83C\uDFAE"})," Safe Controls"]}),(0,l.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:"These controls trigger read-only operations. No destructive actions will be performed."}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsx)("button",{onClick:k,disabled:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 text-white rounded-lg transition-colors flex items-center gap-2",children:f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"animate-spin",children:"⏳"}),"Running..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\uD83D\uDD0D"}),"Run Full Health Check"]})}),(0,l.jsxs)("button",{onClick:y,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDD04"}),"Refresh Status"]}),(0,l.jsxs)("a",{href:"/api/admin/report",download:!0,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCE5"}),"Download System Report"]})]})]}),N&&(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCB"})," Health Check Output"]}),(0,l.jsx)("pre",{className:"bg-slate-950 p-4 rounded-lg text-sm text-slate-300 overflow-x-auto whitespace-pre-wrap",children:N})]}),(0,l.jsxs)("div",{className:"mt-8 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[(0,l.jsxs)("h3",{className:"text-yellow-400 font-semibold mb-2 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"⚠️"})," Actions Requiring Approval"]}),(0,l.jsx)("p",{className:"text-slate-400 text-sm",children:"The following actions are gated and require explicit founder approval:"}),(0,l.jsxs)("ul",{className:"text-slate-400 text-sm mt-2 list-disc list-inside",children:[(0,l.jsx)("li",{children:"Pricing changes"}),(0,l.jsx)("li",{children:"Email campaigns to full userbase"}),(0,l.jsx)("li",{children:"Database migrations"}),(0,l.jsx)("li",{children:"Production redeploys"}),(0,l.jsx)("li",{children:"Legal/compliance updates"})]})]})]})}function r(e){let{label:t,ok:s}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:t}),(0,l.jsxs)("span",{className:"flex items-center gap-2 ".concat(s?"text-green-400":"text-red-400"),children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(s?"bg-green-500":"bg-red-500")}),s?"OK":"DOWN"]})]})}function c(e){let{name:t,active:s}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:t}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(s?"bg-green-500/20 text-green-400":"bg-slate-500/20 text-slate-400"),children:s?"ACTIVE":"INACTIVE"})]})}},1290:function(e,t,s){"use strict";function l(){let e="https://api.levqor.ai";return e&&e.length>0?e:"https://levqor-backend.replit.app"}s.d(t,{r:function(){return l}}),l()}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=6754)}),_N_E=e.O()}]);