(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3551],{6754:function(e,s,t){Promise.resolve().then(t.bind(t,2274))},2274:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var l=t(7437),a=t(2265);function n(){var e,s,t,n,c,o,d,x;let[h,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(null),[b,j]=(0,a.useState)(!0),[g,f]=(0,a.useState)(!1),[v,N]=(0,a.useState)(null);async function w(){try{let e="https://api.levqor.ai",s=localStorage.getItem("admin_token")||"",[t,l]=await Promise.all([fetch("".concat(e,"/api/health/summary")).catch(()=>null),fetch("".concat(e,"/api/admin/autopilot-status"),{headers:{Authorization:"Bearer ".concat(s)}}).catch(()=>null)]);if((null==t?void 0:t.ok)&&u(await t.json()),null==l?void 0:l.ok){let e=await l.json();p(e.autopilot)}}catch(e){console.error("Failed to fetch status:",e)}finally{j(!1)}}async function y(){f(!0),N(null);try{let e=localStorage.getItem("admin_token")||"",s=await fetch("".concat("https://api.levqor.ai","/api/admin/health-check"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();N(e.output||"Health check completed"),w()}else N("Health check failed")}catch(e){N("Error running health check")}finally{f(!1)}}return((0,a.useEffect)(()=>{w()},[]),b)?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Founder Command Console"}),(0,l.jsx)("p",{className:"text-slate-400 mt-1",children:"System controls and monitoring"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83C\uDFE5"})," Health Summary"]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(i,{label:"Application",ok:null!==(s=null==h?void 0:h.app_up)&&void 0!==s&&s}),(0,l.jsx)(i,{label:"Database",ok:null!==(t=null==h?void 0:h.db_ok)&&void 0!==t&&t}),(0,l.jsx)(i,{label:"Stripe",ok:null!==(n=null==h?void 0:h.stripe_ok)&&void 0!==n&&n}),(0,l.jsx)("div",{className:"pt-2 border-t border-slate-800 mt-2",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Overall Status"}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat((null==h?void 0:h.status)==="healthy"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"),children:(null==h?void 0:null===(e=h.status)||void 0===e?void 0:e.toUpperCase())||"UNKNOWN"})]})})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDEE1️"})," Guardian-Autopilot Mode"]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(r,{name:"Guardian Monitor",active:null!==(c=null==m?void 0:m.guardian_active)&&void 0!==c&&c}),(0,l.jsx)(r,{name:"Growth Engine",active:null!==(o=null==m?void 0:m.growth_engine_active)&&void 0!==o&&o}),(0,l.jsx)(r,{name:"Compliance Monitor",active:null!==(d=null==m?void 0:m.compliance_active)&&void 0!==d&&d}),(0,l.jsxs)("div",{className:"pt-2 border-t border-slate-800 mt-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Pending Approvals"}),(0,l.jsx)("span",{className:"text-white font-semibold",children:null!==(x=null==m?void 0:m.pending_approvals)&&void 0!==x?x:0})]}),(null==m?void 0:m.last_health_check)&&(0,l.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Last Check"}),(0,l.jsx)("span",{className:"text-slate-300 text-sm",children:m.last_health_check})]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6 mb-8",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83C\uDFAE"})," Safe Controls"]}),(0,l.jsx)("p",{className:"text-slate-400 text-sm mb-4",children:"These controls trigger read-only operations. No destructive actions will be performed."}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsx)("button",{onClick:y,disabled:g,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 text-white rounded-lg transition-colors flex items-center gap-2",children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"animate-spin",children:"⏳"}),"Running..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\uD83D\uDD0D"}),"Run Full Health Check"]})}),(0,l.jsxs)("button",{onClick:w,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDD04"}),"Refresh Status"]}),(0,l.jsxs)("a",{href:"/api/admin/report",download:!0,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCE5"}),"Download System Report"]})]})]}),v&&(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCB"})," Health Check Output"]}),(0,l.jsx)("pre",{className:"bg-slate-950 p-4 rounded-lg text-sm text-slate-300 overflow-x-auto whitespace-pre-wrap",children:v})]}),(0,l.jsxs)("div",{className:"mt-8 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[(0,l.jsxs)("h3",{className:"text-yellow-400 font-semibold mb-2 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"⚠️"})," Actions Requiring Approval"]}),(0,l.jsx)("p",{className:"text-slate-400 text-sm",children:"The following actions are gated and require explicit founder approval:"}),(0,l.jsxs)("ul",{className:"text-slate-400 text-sm mt-2 list-disc list-inside",children:[(0,l.jsx)("li",{children:"Pricing changes"}),(0,l.jsx)("li",{children:"Email campaigns to full userbase"}),(0,l.jsx)("li",{children:"Database migrations"}),(0,l.jsx)("li",{children:"Production redeploys"}),(0,l.jsx)("li",{children:"Legal/compliance updates"})]})]})]})}function i(e){let{label:s,ok:t}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:s}),(0,l.jsxs)("span",{className:"flex items-center gap-2 ".concat(t?"text-green-400":"text-red-400"),children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(t?"bg-green-500":"bg-red-500")}),t?"OK":"DOWN"]})]})}function r(e){let{name:s,active:t}=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:s}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(t?"bg-green-500/20 text-green-400":"bg-slate-500/20 text-slate-400"),children:t?"ACTIVE":"INACTIVE"})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=6754)}),_N_E=e.O()}]);