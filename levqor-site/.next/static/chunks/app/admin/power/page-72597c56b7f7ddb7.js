(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{4300:function(e,t,s){Promise.resolve().then(s.bind(s,6466))},6466:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var l=s(7437),a=s(2265);let n="https://api.levqor.ai";function o(){let[e,t]=(0,a.useState)({low_cost_mode:!1,growth_paused:!1,maintenance_mode:!1,ai_enabled:!0,marketing_autopilot:!1}),[s,o]=(0,a.useState)(null),[c,x]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),[p,b]=(0,a.useState)(null),j=(0,a.useCallback)(async()=>{try{let s=localStorage.getItem("admin_token")||"",l={Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},[a,i,r,d]=await Promise.all([fetch("".concat(n,"/api/admin/system-toggles"),{headers:l}).catch(()=>null),fetch("".concat(n,"/api/admin/cost-metrics"),{headers:l}).catch(()=>null),fetch("".concat(n,"/api/admin/pending-approvals"),{headers:l}).catch(()=>null),fetch("".concat(n,"/api/admin/recent-logs"),{headers:l}).catch(()=>null)]);if(null==a?void 0:a.ok){let s=await a.json();t(s.toggles||e)}if(null==i?void 0:i.ok){let e=await i.json();o(e.costs||null)}if(null==r?void 0:r.ok){let e=await r.json();x(e.approvals||[])}if(null==d?void 0:d.ok){let e=await d.json();g(e.logs||[])}}catch(e){console.error("Failed to fetch power panel data:",e)}finally{u(!1)}},[e]);(0,a.useEffect)(()=>{j();let e=setInterval(j,3e4);return()=>clearInterval(e)},[j]);let v=async s=>{b(s);try{let l=localStorage.getItem("admin_token")||"",a=!e[s];(await fetch("".concat(n,"/api/admin/toggle"),{method:"POST",headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"},body:JSON.stringify({key:s,value:a})})).ok&&t(e=>({...e,[s]:a}))}catch(e){console.error("Failed to toggle:",e)}finally{b(null)}},f=async(e,t)=>{b("approval-".concat(e));try{let s=localStorage.getItem("admin_token")||"";await fetch("".concat(n,"/api/admin/approval/").concat(e,"/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(s)}}),x(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to process approval:",e)}finally{b(null)}};return h?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-3xl",children:"⚡"}),"Admin Power Panel"]}),(0,l.jsx)("p",{className:"text-slate-400 mt-1",children:"V10 System Controls - Real-time toggles, costs, approvals, and logs"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83C\uDF9A️"})," System Toggles"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(i,{label:"Low-Cost Mode",description:"Reduce API calls, disable non-essential features",checked:e.low_cost_mode,onToggle:()=>v("low_cost_mode"),loading:"low_cost_mode"===p,color:"yellow"}),(0,l.jsx)(i,{label:"Growth Engine Paused",description:"Pause autonomous growth activities",checked:e.growth_paused,onToggle:()=>v("growth_paused"),loading:"growth_paused"===p,color:"orange"}),(0,l.jsx)(i,{label:"Maintenance Mode",description:"Show maintenance page to users",checked:e.maintenance_mode,onToggle:()=>v("maintenance_mode"),loading:"maintenance_mode"===p,color:"red"}),(0,l.jsx)(i,{label:"AI Features Enabled",description:"Enable Brain AI features",checked:e.ai_enabled,onToggle:()=>v("ai_enabled"),loading:"ai_enabled"===p,color:"purple"}),(0,l.jsx)(i,{label:"Marketing Autopilot",description:"Auto-generate and queue marketing content",checked:e.marketing_autopilot,onToggle:()=>v("marketing_autopilot"),loading:"marketing_autopilot"===p,color:"blue"})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCB0"})," Cost Monitor"]}),s?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)(r,{label:"Today",value:s.today,budget:s.budget/30}),(0,l.jsx)(r,{label:"Yesterday",value:s.yesterday,budget:s.budget/30})]}),(0,l.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Month-to-Date"}),(0,l.jsxs)("span",{className:"text-white font-semibold",children:["$",s.mtd.toFixed(2)]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full transition-all ".concat(s.mtd/s.budget>.8?"bg-red-500":s.mtd/s.budget>.5?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(s.mtd/s.budget*100,100),"%")}})}),(0,l.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[(0,l.jsx)("span",{children:"$0"}),(0,l.jsxs)("span",{children:["Budget: $",s.budget]})]})]}),s.spike_detected&&(0,l.jsxs)("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-red-400",children:"⚠️"}),(0,l.jsx)("span",{className:"text-red-400 text-sm",children:"Spike detected! Cost increased 50%+ from yesterday"})]})]}):(0,l.jsx)("div",{className:"text-slate-400 text-center py-8",children:"Cost data unavailable"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCB"})," Pending Approvals",c.length>0&&(0,l.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded-full",children:c.length})]}),c.length>0?(0,l.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:c.map(e=>(0,l.jsx)("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-white",children:e.title}),(0,l.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:[e.type," | Impact: ",e.impact]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>f(e.id,"approve"),disabled:p==="approval-".concat(e.id),className:"px-3 py-1 bg-green-600 hover:bg-green-500 disabled:bg-slate-600 text-white text-sm rounded transition-colors",children:p==="approval-".concat(e.id)?"...":"✓"}),(0,l.jsx)("button",{onClick:()=>f(e.id,"reject"),disabled:p==="approval-".concat(e.id),className:"px-3 py-1 bg-red-600 hover:bg-red-500 disabled:bg-slate-600 text-white text-sm rounded transition-colors",children:"✕"})]})]})},e.id))}):(0,l.jsx)("div",{className:"text-slate-400 text-center py-8",children:"No pending approvals"})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCDC"})," Recent Logs",(0,l.jsx)("button",{onClick:j,className:"ml-auto text-xs bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded transition-colors",children:"Refresh"})]}),m.length>0?(0,l.jsx)("div",{className:"space-y-2 max-h-80 overflow-y-auto font-mono text-xs",children:m.map((e,t)=>(0,l.jsxs)("div",{className:"flex gap-2 p-2 bg-slate-800/50 rounded",children:[(0,l.jsx)("span",{className:"flex-shrink-0 px-1.5 py-0.5 rounded ".concat("error"===e.level?"bg-red-500/20 text-red-400":"warn"===e.level?"bg-yellow-500/20 text-yellow-400":"bg-slate-600/50 text-slate-400"),children:e.level.toUpperCase()}),(0,l.jsx)("span",{className:"text-slate-300 truncate",children:e.message})]},t))}):(0,l.jsx)("div",{className:"text-slate-400 text-center py-8",children:"No recent logs"})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"⚡"})," Quick Actions"]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,l.jsx)(d,{icon:"\uD83D\uDD04",label:"Sync All Data",onClick:()=>console.log("sync")}),(0,l.jsx)(d,{icon:"\uD83E\uDDF9",label:"Clear Cache",onClick:()=>console.log("clear cache")}),(0,l.jsx)(d,{icon:"\uD83D\uDCCA",label:"Export Report",onClick:()=>window.location.href="".concat(n,"/api/admin/report")}),(0,l.jsx)(d,{icon:"\uD83D\uDD14",label:"Test Alerts",onClick:()=>console.log("test alerts")})]})]})]})}function i(e){let{label:t,description:s,checked:a,onToggle:n,loading:o,color:i}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-slate-800 last:border-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-medium",children:t}),(0,l.jsx)("div",{className:"text-xs text-slate-500",children:s})]}),(0,l.jsx)("button",{onClick:n,disabled:o,className:"relative w-12 h-6 rounded-full transition-colors ".concat(a?({yellow:"bg-yellow-500",orange:"bg-orange-500",red:"bg-red-500",purple:"bg-purple-500",blue:"bg-blue-500",green:"bg-green-500"})[i]||"bg-blue-500":"bg-slate-600"," ").concat(o?"opacity-50":""),children:(0,l.jsx)("span",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ".concat(a?"translate-x-6":"")})})]})}function r(e){let{label:t,value:s,budget:a}=e,n=s/a*100,o=n>80;return(0,l.jsxs)("div",{className:"p-4 rounded-lg ".concat(o?"bg-red-500/10 border border-red-500/30":"bg-slate-800/50"),children:[(0,l.jsx)("div",{className:"text-slate-400 text-sm",children:t}),(0,l.jsxs)("div",{className:"text-xl font-bold ".concat(o?"text-red-400":"text-white"),children:["$",s.toFixed(2)]}),(0,l.jsxs)("div",{className:"text-xs text-slate-500",children:[n.toFixed(0),"% of daily budget"]})]})}function d(e){let{icon:t,label:s,onClick:a}=e;return(0,l.jsxs)("button",{onClick:a,className:"p-4 bg-slate-800/50 hover:bg-slate-800 border border-slate-700 rounded-lg transition-colors text-center",children:[(0,l.jsx)("div",{className:"text-2xl mb-2",children:t}),(0,l.jsx)("div",{className:"text-sm text-slate-300",children:s})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=4300)}),_N_E=e.O()}]);