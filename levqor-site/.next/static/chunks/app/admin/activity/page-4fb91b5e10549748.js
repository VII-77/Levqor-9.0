(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6185],{5552:function(e,s,l){Promise.resolve().then(l.bind(l,671))},671:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return n}});var t=l(7437),a=l(2265);function n(){var e,s,l,n,o,d,u,x,m;let[h,v]=(0,a.useState)(null),[p,j]=(0,a.useState)(!0),[g,b]=(0,a.useState)("24h");async function f(){j(!0);try{let e=localStorage.getItem("admin_token")||"",s=await fetch("".concat("https://api.levqor.ai","/api/admin/activity?range=").concat(g),{headers:{Authorization:"Bearer ".concat(e)}});s.ok&&v(await s.json())}catch(e){console.error("Failed to fetch activity:",e)}finally{j(!1)}}return((0,a.useEffect)(()=>{f()},[g]),p)?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"System Activity"}),(0,t.jsx)("p",{className:"text-slate-400 mt-1",children:"Events, errors, and usage patterns (READ-ONLY)"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:["24h","7d","30d"].map(e=>(0,t.jsx)("button",{onClick:()=>b(e),className:"px-3 py-1 rounded-lg text-sm transition-colors ".concat(g===e?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"),children:e.toUpperCase()},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[(0,t.jsx)(r,{title:"Workflow Runs",value:null!==(e=null==h?void 0:h.summary.workflow_runs)&&void 0!==e?e:0,icon:"⚡"}),(0,t.jsx)(r,{title:"Errors",value:null!==(s=null==h?void 0:h.summary.errors)&&void 0!==s?s:0,icon:"⚠️"}),(0,t.jsx)(r,{title:"Approvals",value:null!==(l=null==h?void 0:h.summary.approvals)&&void 0!==l?l:0,icon:"✅"}),(0,t.jsx)(r,{title:"Logins",value:null!==(n=null==h?void 0:h.summary.logins)&&void 0!==n?n:0,icon:"\uD83D\uDD10"}),(0,t.jsx)(r,{title:"Signups",value:null!==(o=null==h?void 0:h.summary.signups)&&void 0!==o?o:0,icon:"\uD83D\uDC64"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCCA"})," Hourly Activity Heatmap"]}),(0,t.jsx)("div",{className:"grid grid-cols-12 gap-1",children:((null==h?void 0:h.hourly_distribution)||Array(24).fill({hour:0,count:0})).map((e,s)=>{let l=e.count>0?Math.min(e.count/10,1):0;return(0,t.jsx)("div",{className:"aspect-square rounded flex items-center justify-center text-xs",style:{backgroundColor:l>0?"rgba(59, 130, 246, ".concat(l,")"):"rgb(30, 41, 59)"},title:"Hour ".concat(s,": ").concat(e.count," events"),children:s},s)})}),(0,t.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-slate-500",children:[(0,t.jsx)("span",{children:"12 AM"}),(0,t.jsx)("span",{children:"6 AM"}),(0,t.jsx)("span",{children:"12 PM"}),(0,t.jsx)("span",{children:"6 PM"}),(0,t.jsx)("span",{children:"12 AM"})]})]}),(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCC8"})," Activity Breakdown"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(i,{label:"Workflow Runs",value:null!==(d=null==h?void 0:h.summary.workflow_runs)&&void 0!==d?d:0,max:100,color:"blue"}),(0,t.jsx)(i,{label:"Errors",value:null!==(u=null==h?void 0:h.summary.errors)&&void 0!==u?u:0,max:50,color:"red"}),(0,t.jsx)(i,{label:"Approvals",value:null!==(x=null==h?void 0:h.summary.approvals)&&void 0!==x?x:0,max:20,color:"green"}),(0,t.jsx)(i,{label:"Signups",value:null!==(m=null==h?void 0:h.summary.signups)&&void 0!==m?m:0,max:50,color:"purple"})]})]})]}),(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCCB"})," Recent Events"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(null==h?void 0:h.events)&&h.events.length>0?h.events.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-800/50 rounded-lg",children:[(0,t.jsx)(c,{type:e.type}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-slate-300 text-sm truncate",children:e.message}),(0,t.jsx)("p",{className:"text-slate-500 text-xs mt-1",children:new Date(e.timestamp).toLocaleString()})]})]},s)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No recent events"})})]})]})}function r(e){let{title:s,value:l,icon:a}=e;return(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-xl",children:a}),(0,t.jsx)("span",{className:"text-slate-400 text-sm",children:s})]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:l.toLocaleString()})]})}function i(e){let{label:s,value:l,max:a,color:n}=e,r=Math.min(l/a*100,100);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-slate-400",children:s}),(0,t.jsx)("span",{className:"text-white",children:l})]}),(0,t.jsx)("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full ".concat({blue:"bg-blue-500",red:"bg-red-500",green:"bg-green-500",purple:"bg-purple-500"}[n]," transition-all duration-300"),style:{width:"".concat(r,"%")}})})]})}function c(e){let{type:s}=e;return(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{children:{autopilot:"\uD83D\uDEE1️",workflow:"⚡",error:"⚠️",login:"\uD83D\uDD10",signup:"\uD83D\uDC64"}[s]||"\uD83D\uDCCB"})})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=5552)}),_N_E=e.O()}]);