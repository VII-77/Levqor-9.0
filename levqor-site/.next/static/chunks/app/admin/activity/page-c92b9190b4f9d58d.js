(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6185],{5552:function(e,s,l){Promise.resolve().then(l.bind(l,671))},671:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return r}});var t=l(7437),n=l(2265),a=l(1290);function r(){var e,s,l,r,d,u,x,m,h;let[v,p]=(0,n.useState)(null),[j,g]=(0,n.useState)(!0),[b,f]=(0,n.useState)("24h");async function N(){g(!0);try{let e=(0,a.r)(),s=localStorage.getItem("admin_token")||"",l=await fetch("".concat(e,"/api/admin/activity?range=").concat(b),{headers:{Authorization:"Bearer ".concat(s)}});l.ok&&p(await l.json())}catch(e){console.error("Failed to fetch activity:",e)}finally{g(!1)}}return((0,n.useEffect)(()=>{N()},[b]),j)?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"System Activity"}),(0,t.jsx)("p",{className:"text-slate-400 mt-1",children:"Events, errors, and usage patterns (READ-ONLY)"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:["24h","7d","30d"].map(e=>(0,t.jsx)("button",{onClick:()=>f(e),className:"px-3 py-1 rounded-lg text-sm transition-colors ".concat(b===e?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"),children:e.toUpperCase()},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[(0,t.jsx)(i,{title:"Workflow Runs",value:null!==(e=null==v?void 0:v.summary.workflow_runs)&&void 0!==e?e:0,icon:"⚡"}),(0,t.jsx)(i,{title:"Errors",value:null!==(s=null==v?void 0:v.summary.errors)&&void 0!==s?s:0,icon:"⚠️"}),(0,t.jsx)(i,{title:"Approvals",value:null!==(l=null==v?void 0:v.summary.approvals)&&void 0!==l?l:0,icon:"✅"}),(0,t.jsx)(i,{title:"Logins",value:null!==(r=null==v?void 0:v.summary.logins)&&void 0!==r?r:0,icon:"\uD83D\uDD10"}),(0,t.jsx)(i,{title:"Signups",value:null!==(d=null==v?void 0:v.summary.signups)&&void 0!==d?d:0,icon:"\uD83D\uDC64"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCCA"})," Hourly Activity Heatmap"]}),(0,t.jsx)("div",{className:"grid grid-cols-12 gap-1",children:((null==v?void 0:v.hourly_distribution)||Array(24).fill({hour:0,count:0})).map((e,s)=>{let l=e.count>0?Math.min(e.count/10,1):0;return(0,t.jsx)("div",{className:"aspect-square rounded flex items-center justify-center text-xs",style:{backgroundColor:l>0?"rgba(59, 130, 246, ".concat(l,")"):"rgb(30, 41, 59)"},title:"Hour ".concat(s,": ").concat(e.count," events"),children:s},s)})}),(0,t.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-slate-500",children:[(0,t.jsx)("span",{children:"12 AM"}),(0,t.jsx)("span",{children:"6 AM"}),(0,t.jsx)("span",{children:"12 PM"}),(0,t.jsx)("span",{children:"6 PM"}),(0,t.jsx)("span",{children:"12 AM"})]})]}),(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCC8"})," Activity Breakdown"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(c,{label:"Workflow Runs",value:null!==(u=null==v?void 0:v.summary.workflow_runs)&&void 0!==u?u:0,max:100,color:"blue"}),(0,t.jsx)(c,{label:"Errors",value:null!==(x=null==v?void 0:v.summary.errors)&&void 0!==x?x:0,max:50,color:"red"}),(0,t.jsx)(c,{label:"Approvals",value:null!==(m=null==v?void 0:v.summary.approvals)&&void 0!==m?m:0,max:20,color:"green"}),(0,t.jsx)(c,{label:"Signups",value:null!==(h=null==v?void 0:v.summary.signups)&&void 0!==h?h:0,max:50,color:"purple"})]})]})]}),(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCCB"})," Recent Events"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(null==v?void 0:v.events)&&v.events.length>0?v.events.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-800/50 rounded-lg",children:[(0,t.jsx)(o,{type:e.type}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-slate-300 text-sm truncate",children:e.message}),(0,t.jsx)("p",{className:"text-slate-500 text-xs mt-1",children:new Date(e.timestamp).toLocaleString()})]})]},s)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No recent events"})})]})]})}function i(e){let{title:s,value:l,icon:n}=e;return(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-xl",children:n}),(0,t.jsx)("span",{className:"text-slate-400 text-sm",children:s})]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:l.toLocaleString()})]})}function c(e){let{label:s,value:l,max:n,color:a}=e,r=Math.min(l/n*100,100);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"text-slate-400",children:s}),(0,t.jsx)("span",{className:"text-white",children:l})]}),(0,t.jsx)("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full ".concat({blue:"bg-blue-500",red:"bg-red-500",green:"bg-green-500",purple:"bg-purple-500"}[a]," transition-all duration-300"),style:{width:"".concat(r,"%")}})})]})}function o(e){let{type:s}=e;return(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-slate-800 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{children:{autopilot:"\uD83D\uDEE1️",workflow:"⚡",error:"⚠️",login:"\uD83D\uDD10",signup:"\uD83D\uDC64"}[s]||"\uD83D\uDCCB"})})}},1290:function(e,s,l){"use strict";function t(){let e="https://api.levqor.ai";return e&&e.length>0?e:"https://levqor-backend.replit.app"}l.d(s,{r:function(){return t}}),t()}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=5552)}),_N_E=e.O()}]);