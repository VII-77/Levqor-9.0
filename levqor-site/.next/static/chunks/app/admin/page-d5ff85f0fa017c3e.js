(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8292:function(e,s,t){Promise.resolve().then(t.bind(t,6683))},6683:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var l=t(7437),n=t(2265),a=t(1290);function i(){var e,s,t,i,o,u,x,m,h,v,p;let[b,j]=(0,n.useState)(null),[g,f]=(0,n.useState)(null),[N,w]=(0,n.useState)(!0),[y,D]=(0,n.useState)(null);async function _(){try{let e=(0,a.r)(),s=localStorage.getItem("admin_token")||"",t={Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},[l,n]=await Promise.all([fetch("".concat(e,"/api/admin/summary"),{headers:t}).catch(()=>null),fetch("".concat(e,"/api/admin/revenue"),{headers:t}).catch(()=>null)]);(null==l?void 0:l.ok)&&j(await l.json()),(null==n?void 0:n.ok)&&f(await n.json())}catch(e){D("Failed to load admin data")}finally{w(!1)}}return((0,n.useEffect)(()=>{_()},[]),N)?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Admin Overview"}),(0,l.jsx)("p",{className:"text-slate-400 mt-1",children:"System health and key metrics at a glance"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,l.jsx)(r,{title:"Total Users",value:null!==(t=null==b?void 0:b.total_users)&&void 0!==t?t:0,icon:"\uD83D\uDC65",color:"blue"}),(0,l.jsx)(r,{title:"Active (7d)",value:null!==(i=null==b?void 0:b.active_users_7d)&&void 0!==i?i:0,icon:"\uD83D\uDD25",color:"green"}),(0,l.jsx)(r,{title:"Workflows",value:null!==(o=null==b?void 0:b.workflows_count)&&void 0!==o?o:0,icon:"⚡",color:"purple"}),(0,l.jsx)(r,{title:"Templates",value:null!==(u=null==b?void 0:b.templates_count)&&void 0!==u?u:0,icon:"\uD83D\uDCCB",color:"orange"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83C\uDFE5"})," System Health"]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(c,{label:"Backend Status",status:(null==b?void 0:b.health_status)||"unknown"}),(0,l.jsx)(c,{label:"Autopilot",status:(null==b?void 0:b.autopilot_status)||"unknown"}),(0,l.jsx)(c,{label:"Error Rate",status:"".concat((null!==(x=null==b?void 0:b.error_rate)&&void 0!==x?x:0).toFixed(1),"%")})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCB0"})," Revenue Snapshot"]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"MRR"}),(0,l.jsxs)("span",{className:"text-white font-semibold",children:["\xa3",null!==(m=null==g?void 0:null===(e=g.mrr)||void 0===e?void 0:e.toFixed(2))&&void 0!==m?m:"0.00"]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"ARR"}),(0,l.jsxs)("span",{className:"text-white font-semibold",children:["\xa3",null!==(h=null==g?void 0:null===(s=g.arr)||void 0===s?void 0:s.toFixed(2))&&void 0!==h?h:"0.00"]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Active Subscriptions"}),(0,l.jsx)("span",{className:"text-white font-semibold",children:null!==(v=null==g?void 0:g.active_subscriptions)&&void 0!==v?v:0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Trials"}),(0,l.jsx)("span",{className:"text-white font-semibold",children:null!==(p=null==g?void 0:g.trial_count)&&void 0!==p?p:0})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDEE1️"})," Guardian-Autopilot Status"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)(d,{name:"Guardian Monitor",active:!0}),(0,l.jsx)(d,{name:"Growth Engine",active:!0}),(0,l.jsx)(d,{name:"Compliance Monitor",active:!0})]})]}),y&&(0,l.jsx)("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400",children:y})]})}function r(e){let{title:s,value:t,icon:n,color:a}=e;return(0,l.jsxs)("div",{className:"rounded-xl border p-4 ".concat({blue:"bg-blue-500/10 border-blue-500/20 text-blue-400",green:"bg-green-500/10 border-green-500/20 text-green-400",purple:"bg-purple-500/10 border-purple-500/20 text-purple-400",orange:"bg-orange-500/10 border-orange-500/20 text-orange-400"}[a]),children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,l.jsx)("span",{className:"text-2xl",children:n})}),(0,l.jsx)("div",{className:"text-2xl font-bold text-white",children:t.toLocaleString()}),(0,l.jsx)("div",{className:"text-sm opacity-80",children:s})]})}function c(e){let{label:s,status:t}=e,n=["healthy","active","ok"].includes(t.toLowerCase());return(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:s}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(n?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"),children:t.toUpperCase()})]})}function d(e){let{name:s,active:t}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-lg",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t?"bg-green-500":"bg-slate-500")}),(0,l.jsx)("span",{className:"text-slate-300",children:s})]})}},1290:function(e,s,t){"use strict";function l(){let e="https://api.levqor.ai";return e&&e.length>0?e:"https://levqor-backend.replit.app"}t.d(s,{r:function(){return l}}),l()}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=8292)}),_N_E=e.O()}]);