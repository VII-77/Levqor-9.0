(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8292:function(e,s,l){Promise.resolve().then(l.bind(l,6683))},6683:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return n}});var t=l(7437),a=l(2265);function n(){var e,s,l,n,c,o,u,x,m,h,v;let[b,p]=(0,a.useState)(null),[j,g]=(0,a.useState)(null),[f,N]=(0,a.useState)(!0),[w,y]=(0,a.useState)(null);async function D(){try{let e="https://api.levqor.ai",s=localStorage.getItem("admin_token")||"",l={Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},[t,a]=await Promise.all([fetch("".concat(e,"/api/admin/summary"),{headers:l}).catch(()=>null),fetch("".concat(e,"/api/admin/revenue"),{headers:l}).catch(()=>null)]);(null==t?void 0:t.ok)&&p(await t.json()),(null==a?void 0:a.ok)&&g(await a.json())}catch(e){y("Failed to load admin data")}finally{N(!1)}}return((0,a.useEffect)(()=>{D()},[]),f)?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Admin Overview"}),(0,t.jsx)("p",{className:"text-slate-400 mt-1",children:"System health and key metrics at a glance"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,t.jsx)(i,{title:"Total Users",value:null!==(l=null==b?void 0:b.total_users)&&void 0!==l?l:0,icon:"\uD83D\uDC65",color:"blue"}),(0,t.jsx)(i,{title:"Active (7d)",value:null!==(n=null==b?void 0:b.active_users_7d)&&void 0!==n?n:0,icon:"\uD83D\uDD25",color:"green"}),(0,t.jsx)(i,{title:"Workflows",value:null!==(c=null==b?void 0:b.workflows_count)&&void 0!==c?c:0,icon:"⚡",color:"purple"}),(0,t.jsx)(i,{title:"Templates",value:null!==(o=null==b?void 0:b.templates_count)&&void 0!==o?o:0,icon:"\uD83D\uDCCB",color:"orange"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83C\uDFE5"})," System Health"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(r,{label:"Backend Status",status:(null==b?void 0:b.health_status)||"unknown"}),(0,t.jsx)(r,{label:"Autopilot",status:(null==b?void 0:b.autopilot_status)||"unknown"}),(0,t.jsx)(r,{label:"Error Rate",status:"".concat((null!==(u=null==b?void 0:b.error_rate)&&void 0!==u?u:0).toFixed(1),"%")})]})]}),(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDCB0"})," Revenue Snapshot"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"MRR"}),(0,t.jsxs)("span",{className:"text-white font-semibold",children:["\xa3",null!==(x=null==j?void 0:null===(e=j.mrr)||void 0===e?void 0:e.toFixed(2))&&void 0!==x?x:"0.00"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"ARR"}),(0,t.jsxs)("span",{className:"text-white font-semibold",children:["\xa3",null!==(m=null==j?void 0:null===(s=j.arr)||void 0===s?void 0:s.toFixed(2))&&void 0!==m?m:"0.00"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Active Subscriptions"}),(0,t.jsx)("span",{className:"text-white font-semibold",children:null!==(h=null==j?void 0:j.active_subscriptions)&&void 0!==h?h:0})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Trials"}),(0,t.jsx)("span",{className:"text-white font-semibold",children:null!==(v=null==j?void 0:j.trial_count)&&void 0!==v?v:0})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"\uD83D\uDEE1️"})," Guardian-Autopilot Status"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(d,{name:"Guardian Monitor",active:!0}),(0,t.jsx)(d,{name:"Growth Engine",active:!0}),(0,t.jsx)(d,{name:"Compliance Monitor",active:!0})]})]}),w&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400",children:w})]})}function i(e){let{title:s,value:l,icon:a,color:n}=e;return(0,t.jsxs)("div",{className:"rounded-xl border p-4 ".concat({blue:"bg-blue-500/10 border-blue-500/20 text-blue-400",green:"bg-green-500/10 border-green-500/20 text-green-400",purple:"bg-purple-500/10 border-purple-500/20 text-purple-400",orange:"bg-orange-500/10 border-orange-500/20 text-orange-400"}[n]),children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,t.jsx)("span",{className:"text-2xl",children:a})}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:l.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm opacity-80",children:s})]})}function r(e){let{label:s,status:l}=e,a=["healthy","active","ok"].includes(l.toLowerCase());return(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-slate-400",children:s}),(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"),children:l.toUpperCase()})]})}function d(e){let{name:s,active:l}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(l?"bg-green-500":"bg-slate-500")}),(0,t.jsx)("span",{className:"text-slate-300",children:s})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=8292)}),_N_E=e.O()}]);