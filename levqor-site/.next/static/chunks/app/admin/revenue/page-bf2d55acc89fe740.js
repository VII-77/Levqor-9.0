(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3836],{3486:function(e,s,t){Promise.resolve().then(t.bind(t,1365))},1365:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var l=t(7437),n=t(2265),a=t(1290);function i(){var e,s,t,i,c,d;let[o,u]=(0,n.useState)(null),[x,m]=(0,n.useState)(!0),[h,v]=(0,n.useState)("30d");async function b(){m(!0);try{let e=(0,a.r)(),s=localStorage.getItem("admin_token")||"",t=await fetch("".concat(e,"/api/admin/revenue?range=").concat(h),{headers:{Authorization:"Bearer ".concat(s)}});t.ok&&u(await t.json())}catch(e){console.error("Failed to fetch revenue:",e)}finally{m(!1)}}return((0,n.useEffect)(()=>{b()},[h]),x)?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Revenue Analytics"}),(0,l.jsx)("p",{className:"text-slate-400 mt-1",children:"Financial metrics and subscription data (READ-ONLY)"})]}),(0,l.jsx)("div",{className:"flex gap-2",children:["7d","30d","90d","all"].map(e=>(0,l.jsx)("button",{onClick:()=>v(e),className:"px-3 py-1 rounded-lg text-sm transition-colors ".concat(h===e?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"),children:e.toUpperCase()},e))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,l.jsx)(r,{title:"Monthly Recurring Revenue",value:"\xa3".concat((null!==(e=null==o?void 0:o.mrr)&&void 0!==e?e:0).toFixed(2)),icon:"\uD83D\uDCB7",color:"green"}),(0,l.jsx)(r,{title:"Annual Recurring Revenue",value:"\xa3".concat((null!==(s=null==o?void 0:o.arr)&&void 0!==s?s:0).toFixed(2)),icon:"\uD83D\uDCC8",color:"blue"}),(0,l.jsx)(r,{title:"Avg Revenue Per User",value:"\xa3".concat((null!==(t=null==o?void 0:o.arpu)&&void 0!==t?t:0).toFixed(2)),icon:"\uD83D\uDC64",color:"purple"}),(0,l.jsx)(r,{title:"Churn Rate",value:"".concat(((null!==(i=null==o?void 0:o.churn_rate)&&void 0!==i?i:0)*100).toFixed(1),"%"),icon:"\uD83D\uDCC9",color:"orange"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCA"})," Subscriptions"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-slate-800/50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-semibold",children:"Active Subscriptions"}),(0,l.jsx)("div",{className:"text-slate-400 text-sm",children:"Paying customers"})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-green-400",children:null!==(c=null==o?void 0:o.active_subscriptions)&&void 0!==c?c:0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-slate-800/50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-semibold",children:"Active Trials"}),(0,l.jsx)("div",{className:"text-slate-400 text-sm",children:"7-day trial period"})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:null!==(d=null==o?void 0:o.trial_count)&&void 0!==d?d:0})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCB0"})," Revenue Summary"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Currency"}),(0,l.jsx)("span",{className:"text-white",children:(null==o?void 0:o.currency)||"GBP"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Data Range"}),(0,l.jsx)("span",{className:"text-white",children:h.toUpperCase()})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Last Updated"}),(0,l.jsx)("span",{className:"text-slate-300 text-sm",children:(null==o?void 0:o.timestamp)?new Date(o.timestamp).toLocaleString():"N/A"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCC8"})," Revenue Trend"]}),(0,l.jsx)("div",{className:"h-64 flex items-center justify-center text-slate-500",children:(null==o?void 0:o.revenue_trend)&&o.revenue_trend.length>0?(0,l.jsx)("div",{className:"w-full",children:o.revenue_trend.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-slate-400 w-24",children:e.date}),(0,l.jsx)("div",{className:"flex-1 bg-slate-800 rounded h-4",children:(0,l.jsx)("div",{className:"bg-blue-500 rounded h-4",style:{width:"".concat(Math.min(e.amount/(o.mrr||1)*100,100),"%")}})}),(0,l.jsxs)("span",{className:"text-white w-20 text-right",children:["\xa3",e.amount.toFixed(2)]})]},s))}):(0,l.jsx)("p",{children:"Revenue trend data will appear as subscriptions are processed"})})]}),(0,l.jsx)("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:(0,l.jsxs)("p",{className:"text-blue-400 text-sm",children:[(0,l.jsx)("strong",{children:"Note:"})," All data shown is READ-ONLY. Revenue modifications, refunds, and billing adjustments require Stripe Dashboard access and founder approval."]})})]})}function r(e){let{title:s,value:t,icon:n,color:a}=e;return(0,l.jsxs)("div",{className:"rounded-xl border p-4 ".concat({green:"bg-green-500/10 border-green-500/20",blue:"bg-blue-500/10 border-blue-500/20",purple:"bg-purple-500/10 border-purple-500/20",orange:"bg-orange-500/10 border-orange-500/20"}[a]),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-xl",children:n}),(0,l.jsx)("span",{className:"text-slate-400 text-sm",children:s})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-white",children:t})]})}},1290:function(e,s,t){"use strict";function l(){let e="https://api.levqor.ai";return e&&e.length>0?e:"https://levqor-backend.replit.app"}t.d(s,{r:function(){return l}}),l()}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=3486)}),_N_E=e.O()}]);