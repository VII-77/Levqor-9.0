(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3836],{3486:function(e,s,t){Promise.resolve().then(t.bind(t,1365))},1365:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var l=t(7437),a=t(2265);function n(){var e,s,t,n,r,d;let[c,o]=(0,a.useState)(null),[x,u]=(0,a.useState)(!0),[m,h]=(0,a.useState)("30d");async function v(){u(!0);try{let e=localStorage.getItem("admin_token")||"",s=await fetch("".concat("https://api.levqor.ai","/api/admin/revenue?range=").concat(m),{headers:{Authorization:"Bearer ".concat(e)}});s.ok&&o(await s.json())}catch(e){console.error("Failed to fetch revenue:",e)}finally{u(!1)}}return((0,a.useEffect)(()=>{v()},[m]),x)?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Revenue Analytics"}),(0,l.jsx)("p",{className:"text-slate-400 mt-1",children:"Financial metrics and subscription data (READ-ONLY)"})]}),(0,l.jsx)("div",{className:"flex gap-2",children:["7d","30d","90d","all"].map(e=>(0,l.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 rounded-lg text-sm transition-colors ".concat(m===e?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"),children:e.toUpperCase()},e))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,l.jsx)(i,{title:"Monthly Recurring Revenue",value:"\xa3".concat((null!==(e=null==c?void 0:c.mrr)&&void 0!==e?e:0).toFixed(2)),icon:"\uD83D\uDCB7",color:"green"}),(0,l.jsx)(i,{title:"Annual Recurring Revenue",value:"\xa3".concat((null!==(s=null==c?void 0:c.arr)&&void 0!==s?s:0).toFixed(2)),icon:"\uD83D\uDCC8",color:"blue"}),(0,l.jsx)(i,{title:"Avg Revenue Per User",value:"\xa3".concat((null!==(t=null==c?void 0:c.arpu)&&void 0!==t?t:0).toFixed(2)),icon:"\uD83D\uDC64",color:"purple"}),(0,l.jsx)(i,{title:"Churn Rate",value:"".concat(((null!==(n=null==c?void 0:c.churn_rate)&&void 0!==n?n:0)*100).toFixed(1),"%"),icon:"\uD83D\uDCC9",color:"orange"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCCA"})," Subscriptions"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-slate-800/50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-semibold",children:"Active Subscriptions"}),(0,l.jsx)("div",{className:"text-slate-400 text-sm",children:"Paying customers"})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-green-400",children:null!==(r=null==c?void 0:c.active_subscriptions)&&void 0!==r?r:0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-slate-800/50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-semibold",children:"Active Trials"}),(0,l.jsx)("div",{className:"text-slate-400 text-sm",children:"7-day trial period"})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:null!==(d=null==c?void 0:c.trial_count)&&void 0!==d?d:0})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCB0"})," Revenue Summary"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Currency"}),(0,l.jsx)("span",{className:"text-white",children:(null==c?void 0:c.currency)||"GBP"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Data Range"}),(0,l.jsx)("span",{className:"text-white",children:m.toUpperCase()})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-slate-400",children:"Last Updated"}),(0,l.jsx)("span",{className:"text-slate-300 text-sm",children:(null==c?void 0:c.timestamp)?new Date(c.timestamp).toLocaleString():"N/A"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"\uD83D\uDCC8"})," Revenue Trend"]}),(0,l.jsx)("div",{className:"h-64 flex items-center justify-center text-slate-500",children:(null==c?void 0:c.revenue_trend)&&c.revenue_trend.length>0?(0,l.jsx)("div",{className:"w-full",children:c.revenue_trend.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-slate-400 w-24",children:e.date}),(0,l.jsx)("div",{className:"flex-1 bg-slate-800 rounded h-4",children:(0,l.jsx)("div",{className:"bg-blue-500 rounded h-4",style:{width:"".concat(Math.min(e.amount/(c.mrr||1)*100,100),"%")}})}),(0,l.jsxs)("span",{className:"text-white w-20 text-right",children:["\xa3",e.amount.toFixed(2)]})]},s))}):(0,l.jsx)("p",{children:"Revenue trend data will appear as subscriptions are processed"})})]}),(0,l.jsx)("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:(0,l.jsxs)("p",{className:"text-blue-400 text-sm",children:[(0,l.jsx)("strong",{children:"Note:"})," All data shown is READ-ONLY. Revenue modifications, refunds, and billing adjustments require Stripe Dashboard access and founder approval."]})})]})}function i(e){let{title:s,value:t,icon:a,color:n}=e;return(0,l.jsxs)("div",{className:"rounded-xl border p-4 ".concat({green:"bg-green-500/10 border-green-500/20",blue:"bg-blue-500/10 border-blue-500/20",purple:"bg-purple-500/10 border-purple-500/20",orange:"bg-orange-500/10 border-orange-500/20"}[n]),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)("span",{className:"text-xl",children:a}),(0,l.jsx)("span",{className:"text-slate-400 text-sm",children:s})]}),(0,l.jsx)("div",{className:"text-2xl font-bold text-white",children:t})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=3486)}),_N_E=e.O()}]);