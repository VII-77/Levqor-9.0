(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6722:function(e,s,t){Promise.resolve().then(t.t.bind(t,2972,23)),Promise.resolve().then(t.bind(t,1889))},1889:function(e,s,t){"use strict";t.d(s,{default:function(){return d}});var r=t(7437),a=t(2265);function d(){let[e,s]=(0,a.useState)(null),[t,d]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null);return((0,a.useEffect)(()=>{async function e(){try{let e=sessionStorage.getItem("admin_token");if(!e){n("Admin token required"),d(!1);return}let t=await fetch("".concat("https://api.levqor.ai","/admin/analytics"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("HTTP ".concat(t.status));let r=await t.json();s(r),n(null)}catch(e){n(e.message||"Failed to load analytics")}finally{d(!1)}}e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]),t)?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]}):l?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Analytics Error"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:l})]}):e?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-purple-100 text-sm mt-1",children:"Real-time growth metrics"})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-blue-600 uppercase tracking-wide mb-1",children:"Total Users"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-900",children:e.users.total.toLocaleString()})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-green-600 uppercase tracking-wide mb-1",children:"New (7d)"}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-green-900",children:["+",e.users.new_7d.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-purple-600 uppercase tracking-wide mb-1",children:"New (30d)"}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-purple-900",children:["+",e.users.new_30d.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-orange-600 uppercase tracking-wide mb-1",children:"Referrals (7d)"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-900",children:e.referrals.total_7d.toLocaleString()})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Top Referral Sources (30d)"}),e.referrals.top_sources.length>0?(0,r.jsx)("div",{className:"space-y-2",children:e.referrals.top_sources.slice(0,5).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded px-3 py-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-xs font-bold text-gray-400",children:["#",s+1]}),(0,r.jsx)("span",{className:"font-medium text-gray-800",children:e.source})]}),(0,r.jsx)("span",{className:"text-sm font-semibold text-indigo-600",children:e.count})]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No referral data yet"})]}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 text-xs text-gray-400 text-center",children:["Last updated: ",new Date(1e3*e.timestamp).toLocaleTimeString()]})]})]}):null}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=6722)}),_N_E=e.O()}]);