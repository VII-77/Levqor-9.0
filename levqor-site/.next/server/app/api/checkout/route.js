"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/checkout/route";
exports.ids = ["app/api/checkout/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Froute&page=%2Fapi%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Froute&page=%2Fapi%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_levqor_site_src_app_api_checkout_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/checkout/route.ts */ \"(rsc)/./src/app/api/checkout/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/checkout/route\",\n        pathname: \"/api/checkout\",\n        filename: \"route\",\n        bundlePath: \"app/api/checkout/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/levqor-site/src/app/api/checkout/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_levqor_site_src_app_api_checkout_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/checkout/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGVja291dCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2hlY2tvdXQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjaGVja291dCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGbGV2cW9yLXNpdGUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZydW5uZXIlMkZ3b3Jrc3BhY2UlMkZsZXZxb3Itc2l0ZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0I7QUFDN0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXZxb3Itc2l0ZS8/NTllMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2xldnFvci1zaXRlL3NyYy9hcHAvYXBpL2NoZWNrb3V0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGVja291dC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoZWNrb3V0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jaGVja291dC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvbGV2cW9yLXNpdGUvc3JjL2FwcC9hcGkvY2hlY2tvdXQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NoZWNrb3V0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Froute&page=%2Fapi%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/checkout/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/checkout/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stripe */ \"(rsc)/./node_modules/stripe/esm/stripe.esm.node.js\");\n\n\nconst dynamic = \"force-dynamic\";\nfunction readEnv() {\n    return {\n        SECRET: process.env.STRIPE_SECRET_KEY,\n        SITE_URL: process.env.SITE_URL || \"https://www.levqor.ai\",\n        STARTER_M: process.env.STRIPE_PRICE_STARTER,\n        STARTER_Y: process.env.STRIPE_PRICE_STARTER_YEAR,\n        LAUNCH_M: process.env.STRIPE_PRICE_LAUNCH,\n        LAUNCH_Y: process.env.STRIPE_PRICE_LAUNCH_YEAR,\n        GROWTH_M: process.env.STRIPE_PRICE_GROWTH,\n        GROWTH_Y: process.env.STRIPE_PRICE_GROWTH_YEAR,\n        AGENCY_M: process.env.STRIPE_PRICE_AGENCY,\n        AGENCY_Y: process.env.STRIPE_PRICE_AGENCY_YEAR,\n        DFY_STARTER: process.env.STRIPE_PRICE_DFY_STARTER,\n        DFY_PROFESSIONAL: process.env.STRIPE_PRICE_DFY_PROFESSIONAL,\n        DFY_ENTERPRISE: process.env.STRIPE_PRICE_DFY_ENTERPRISE,\n        ADDON_PRIORITY_SUPPORT: process.env.STRIPE_PRICE_ADDON_PRIORITY_SUPPORT,\n        ADDON_SLA_99: process.env.STRIPE_PRICE_ADDON_SLA_99,\n        ADDON_WHITE_LABEL: process.env.STRIPE_PRICE_ADDON_WHITE_LABEL,\n        ADDON_EXTRA_WORKFLOWS: process.env.STRIPE_PRICE_ADDON_EXTRA_WORKFLOWS\n    };\n}\nfunction stripeClient(secret) {\n    if (!secret) throw new Error(\"missing STRIPE_SECRET_KEY\");\n    return new stripe__WEBPACK_IMPORTED_MODULE_1__[\"default\"](secret, {\n        apiVersion: \"2024-06-20\"\n    });\n}\nasync function GET() {\n    const env = readEnv();\n    const required = [\n        \"SECRET\",\n        \"STARTER_M\",\n        \"STARTER_Y\",\n        \"LAUNCH_M\",\n        \"LAUNCH_Y\"\n    ];\n    const missing = required.filter((k)=>!env[k]);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        ok: missing.length === 0,\n        missing\n    });\n}\nasync function POST(req) {\n    try {\n        const env = readEnv();\n        if (!env.SECRET) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: false,\n                error: \"missing_env:SECRET\"\n            }, {\n                status: 500\n            });\n        }\n        const body = await req.json();\n        console.log(\"CHECKOUT-DEBUG\", JSON.stringify(body, null, 2));\n        const purchaseType = body.purchase_type || \"subscription\";\n        if (purchaseType === \"subscription\") {\n            const tier = body.tier || body.plan || \"starter\";\n            const interval = body.billing_interval || (body.term === \"yearly\" ? \"year\" : \"month\");\n            const priceMap = {\n                \"starter:month\": env.STARTER_M,\n                \"starter:year\": env.STARTER_Y,\n                \"launch:month\": env.LAUNCH_M,\n                \"launch:year\": env.LAUNCH_Y,\n                \"growth:month\": env.GROWTH_M,\n                \"growth:year\": env.GROWTH_Y,\n                \"agency:month\": env.AGENCY_M,\n                \"agency:year\": env.AGENCY_Y,\n                \"starter:monthly\": env.STARTER_M,\n                \"starter:yearly\": env.STARTER_Y,\n                \"launch:monthly\": env.LAUNCH_M,\n                \"launch:yearly\": env.LAUNCH_Y,\n                \"growth:monthly\": env.GROWTH_M,\n                \"growth:yearly\": env.GROWTH_Y,\n                \"agency:monthly\": env.AGENCY_M,\n                \"agency:yearly\": env.AGENCY_Y\n            };\n            const priceId = priceMap[`${tier}:${interval}`];\n            if (!priceId) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    ok: false,\n                    error: `invalid_plan: ${tier}:${interval}`,\n                    available: Object.keys(priceMap).filter((k)=>priceMap[k])\n                }, {\n                    status: 400\n                });\n            }\n            const stripe = stripeClient(env.SECRET);\n            const session = await stripe.checkout.sessions.create({\n                mode: \"subscription\",\n                line_items: [\n                    {\n                        price: priceId,\n                        quantity: 1\n                    }\n                ],\n                allow_promotion_codes: true,\n                subscription_data: {\n                    trial_period_days: 7\n                },\n                success_url: `${env.SITE_URL}/welcome?session_id={CHECKOUT_SESSION_ID}`,\n                cancel_url: `${env.SITE_URL}/pricing?canceled=1`\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: true,\n                url: session.url\n            });\n        }\n        if (purchaseType === \"dfy\") {\n            const pack = body.dfy_pack || \"\";\n            const dfyMap = {\n                \"dfy_starter\": env.DFY_STARTER,\n                \"dfy_professional\": env.DFY_PROFESSIONAL,\n                \"dfy_enterprise\": env.DFY_ENTERPRISE\n            };\n            const priceId = dfyMap[pack];\n            if (!priceId) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    ok: false,\n                    error: `invalid_dfy_pack: ${pack}`,\n                    available: Object.keys(dfyMap)\n                }, {\n                    status: 400\n                });\n            }\n            const stripe = stripeClient(env.SECRET);\n            const session = await stripe.checkout.sessions.create({\n                mode: \"payment\",\n                line_items: [\n                    {\n                        price: priceId,\n                        quantity: 1\n                    }\n                ],\n                allow_promotion_codes: true,\n                success_url: `${env.SITE_URL}/welcome?session_id={CHECKOUT_SESSION_ID}&type=dfy`,\n                cancel_url: `${env.SITE_URL}/pricing?canceled=1`\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: true,\n                url: session.url\n            });\n        }\n        if (purchaseType === \"addons\") {\n            const addon = typeof body.addons === \"string\" ? body.addons : body.addons?.[0] || \"\";\n            const addonMap = {\n                \"addon_priority_support\": env.ADDON_PRIORITY_SUPPORT,\n                \"addon_sla_99\": env.ADDON_SLA_99,\n                \"addon_white_label\": env.ADDON_WHITE_LABEL,\n                \"addon_extra_workflows\": env.ADDON_EXTRA_WORKFLOWS,\n                \"PRIORITY_SUPPORT\": env.ADDON_PRIORITY_SUPPORT,\n                \"SLA_99_9\": env.ADDON_SLA_99,\n                \"WHITE_LABEL\": env.ADDON_WHITE_LABEL\n            };\n            const priceId = addonMap[addon];\n            if (!priceId) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    ok: false,\n                    error: `invalid_addon: ${addon}`,\n                    available: Object.keys(addonMap)\n                }, {\n                    status: 400\n                });\n            }\n            const stripe = stripeClient(env.SECRET);\n            const session = await stripe.checkout.sessions.create({\n                mode: \"subscription\",\n                line_items: [\n                    {\n                        price: priceId,\n                        quantity: 1\n                    }\n                ],\n                allow_promotion_codes: true,\n                success_url: `${env.SITE_URL}/welcome?session_id={CHECKOUT_SESSION_ID}&type=addon`,\n                cancel_url: `${env.SITE_URL}/pricing?canceled=1`\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                ok: true,\n                url: session.url\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: `unknown_purchase_type: ${purchaseType}`\n        }, {\n            status: 400\n        });\n    } catch (err) {\n        console.error(\"checkout_error\", {\n            message: err?.message,\n            type: err?.type,\n            code: err?.code,\n            param: err?.param,\n            statusCode: err?.statusCode,\n            stack: err?.stack?.substring(0, 500)\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ok: false,\n            error: `${err?.type || \"unknown\"}: ${err?.message || err}`,\n            debug: {\n                code: err?.code,\n                param: err?.param\n            }\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3RGLHFEQUFZQSxDQUFDZ0QsSUFBSSxDQUFDO1lBQ3ZCQyxJQUFJO1lBQ0pJLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRU8sYUFBYSxDQUFDO1FBQ2pELEdBQUc7WUFBRU4sUUFBUTtRQUFJO0lBRW5CLEVBQUUsT0FBT3VDLEtBQVU7UUFDakJyQyxRQUFRSCxLQUFLLENBQUMsa0JBQWtCO1lBQzlCeUMsU0FBU0QsS0FBS0M7WUFDZEMsTUFBTUYsS0FBS0U7WUFDWEMsTUFBTUgsS0FBS0c7WUFDWEMsT0FBT0osS0FBS0k7WUFDWkMsWUFBWUwsS0FBS0s7WUFDakJDLE9BQU9OLEtBQUtNLE9BQU9DLFVBQVUsR0FBRztRQUNsQztRQUNBLE9BQU9wRyxxREFBWUEsQ0FBQ2dELElBQUksQ0FBQztZQUN2QkMsSUFBSTtZQUNKSSxPQUFPLENBQUMsRUFBRXdDLEtBQUtFLFFBQVEsVUFBVSxFQUFFLEVBQUVGLEtBQUtDLFdBQVdELElBQUksQ0FBQztZQUMxRFEsT0FBTztnQkFBRUwsTUFBTUgsS0FBS0c7Z0JBQU1DLE9BQU9KLEtBQUtJO1lBQU07UUFDOUMsR0FBRztZQUFFM0MsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZXZxb3Itc2l0ZS8uL3NyYy9hcHAvYXBpL2NoZWNrb3V0L3JvdXRlLnRzP2I2NzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgU3RyaXBlIGZyb20gXCJzdHJpcGVcIjtcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSBcImZvcmNlLWR5bmFtaWNcIjtcblxuZnVuY3Rpb24gcmVhZEVudigpIHtcbiAgcmV0dXJuIHtcbiAgICBTRUNSRVQ6IHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZLFxuICAgIFNJVEVfVVJMOiBwcm9jZXNzLmVudi5TSVRFX1VSTCB8fCBcImh0dHBzOi8vd3d3LmxldnFvci5haVwiLFxuICAgIFNUQVJURVJfTTogcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX1NUQVJURVIsXG4gICAgU1RBUlRFUl9ZOiBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfU1RBUlRFUl9ZRUFSLFxuICAgIExBVU5DSF9NOiAgcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0xBVU5DSCxcbiAgICBMQVVOQ0hfWTogIHByb2Nlc3MuZW52LlNUUklQRV9QUklDRV9MQVVOQ0hfWUVBUixcbiAgICBHUk9XVEhfTTogIHByb2Nlc3MuZW52LlNUUklQRV9QUklDRV9HUk9XVEgsXG4gICAgR1JPV1RIX1k6ICBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfR1JPV1RIX1lFQVIsXG4gICAgQUdFTkNZX006ICBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfQUdFTkNZLFxuICAgIEFHRU5DWV9ZOiAgcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0FHRU5DWV9ZRUFSLFxuICAgIERGWV9TVEFSVEVSOiAgICAgIHByb2Nlc3MuZW52LlNUUklQRV9QUklDRV9ERllfU1RBUlRFUixcbiAgICBERllfUFJPRkVTU0lPTkFMOiBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfREZZX1BST0ZFU1NJT05BTCxcbiAgICBERllfRU5URVJQUklTRTogICBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfREZZX0VOVEVSUFJJU0UsXG4gICAgQURET05fUFJJT1JJVFlfU1VQUE9SVDogcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0FERE9OX1BSSU9SSVRZX1NVUFBPUlQsXG4gICAgQURET05fU0xBXzk5OiAgICAgICAgICAgcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0FERE9OX1NMQV85OSxcbiAgICBBRERPTl9XSElURV9MQUJFTDogICAgICBwcm9jZXNzLmVudi5TVFJJUEVfUFJJQ0VfQURET05fV0hJVEVfTEFCRUwsXG4gICAgQURET05fRVhUUkFfV09SS0ZMT1dTOiAgcHJvY2Vzcy5lbnYuU1RSSVBFX1BSSUNFX0FERE9OX0VYVFJBX1dPUktGTE9XUyxcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3RyaXBlQ2xpZW50KHNlY3JldD86IHN0cmluZykge1xuICBpZiAoIXNlY3JldCkgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBTVFJJUEVfU0VDUkVUX0tFWVwiKTtcbiAgcmV0dXJuIG5ldyBTdHJpcGUoc2VjcmV0LCB7IGFwaVZlcnNpb246IFwiMjAyNC0wNi0yMFwiIGFzIGFueSB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgY29uc3QgZW52ID0gcmVhZEVudigpO1xuICBjb25zdCByZXF1aXJlZCA9IFtcIlNFQ1JFVFwiLCBcIlNUQVJURVJfTVwiLCBcIlNUQVJURVJfWVwiLCBcIkxBVU5DSF9NXCIsIFwiTEFVTkNIX1lcIl07XG4gIGNvbnN0IG1pc3NpbmcgPSByZXF1aXJlZC5maWx0ZXIoayA9PiAhZW52W2sgYXMga2V5b2YgdHlwZW9mIGVudl0pO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvazogbWlzc2luZy5sZW5ndGggPT09IDAsIG1pc3NpbmcgfSk7XG59XG5cbnR5cGUgUmVxdWVzdEJvZHkgPSB7XG4gIHB1cmNoYXNlX3R5cGU/OiBcInN1YnNjcmlwdGlvblwiIHwgXCJkZnlcIiB8IFwiYWRkb25zXCI7XG4gIHRpZXI/OiBzdHJpbmc7XG4gIGJpbGxpbmdfaW50ZXJ2YWw/OiBcIm1vbnRoXCIgfCBcInllYXJcIjtcbiAgcGxhbj86IHN0cmluZztcbiAgdGVybT86IFwibW9udGhseVwiIHwgXCJ5ZWFybHlcIjtcbiAgZGZ5X3BhY2s/OiBzdHJpbmc7XG4gIGFkZG9ucz86IHN0cmluZyB8IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZW52ID0gcmVhZEVudigpO1xuICAgIGlmICghZW52LlNFQ1JFVCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IGZhbHNlLCBlcnJvcjogXCJtaXNzaW5nX2VudjpTRUNSRVRcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJvZHk6IFJlcXVlc3RCb2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhcIkNIRUNLT1VULURFQlVHXCIsIEpTT04uc3RyaW5naWZ5KGJvZHksIG51bGwsIDIpKTtcblxuICAgIGNvbnN0IHB1cmNoYXNlVHlwZSA9IGJvZHkucHVyY2hhc2VfdHlwZSB8fCBcInN1YnNjcmlwdGlvblwiO1xuXG4gICAgaWYgKHB1cmNoYXNlVHlwZSA9PT0gXCJzdWJzY3JpcHRpb25cIikge1xuICAgICAgY29uc3QgdGllciA9IGJvZHkudGllciB8fCBib2R5LnBsYW4gfHwgXCJzdGFydGVyXCI7XG4gICAgICBjb25zdCBpbnRlcnZhbCA9IGJvZHkuYmlsbGluZ19pbnRlcnZhbCB8fCAoYm9keS50ZXJtID09PSBcInllYXJseVwiID8gXCJ5ZWFyXCIgOiBcIm1vbnRoXCIpO1xuICAgICAgXG4gICAgICBjb25zdCBwcmljZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPiA9IHtcbiAgICAgICAgXCJzdGFydGVyOm1vbnRoXCI6ICBlbnYuU1RBUlRFUl9NLFxuICAgICAgICBcInN0YXJ0ZXI6eWVhclwiOiAgIGVudi5TVEFSVEVSX1ksXG4gICAgICAgIFwibGF1bmNoOm1vbnRoXCI6ICAgZW52LkxBVU5DSF9NLFxuICAgICAgICBcImxhdW5jaDp5ZWFyXCI6ICAgIGVudi5MQVVOQ0hfWSxcbiAgICAgICAgXCJncm93dGg6bW9udGhcIjogICBlbnYuR1JPV1RIX00sXG4gICAgICAgIFwiZ3Jvd3RoOnllYXJcIjogICAgZW52LkdST1dUSF9ZLFxuICAgICAgICBcImFnZW5jeTptb250aFwiOiAgIGVudi5BR0VOQ1lfTSxcbiAgICAgICAgXCJhZ2VuY3k6eWVhclwiOiAgICBlbnYuQUdFTkNZX1ksXG4gICAgICAgIFwic3RhcnRlcjptb250aGx5XCI6IGVudi5TVEFSVEVSX00sXG4gICAgICAgIFwic3RhcnRlcjp5ZWFybHlcIjogIGVudi5TVEFSVEVSX1ksXG4gICAgICAgIFwibGF1bmNoOm1vbnRobHlcIjogIGVudi5MQVVOQ0hfTSxcbiAgICAgICAgXCJsYXVuY2g6eWVhcmx5XCI6ICAgZW52LkxBVU5DSF9ZLFxuICAgICAgICBcImdyb3d0aDptb250aGx5XCI6ICBlbnYuR1JPV1RIX00sXG4gICAgICAgIFwiZ3Jvd3RoOnllYXJseVwiOiAgIGVudi5HUk9XVEhfWSxcbiAgICAgICAgXCJhZ2VuY3k6bW9udGhseVwiOiAgZW52LkFHRU5DWV9NLFxuICAgICAgICBcImFnZW5jeTp5ZWFybHlcIjogICBlbnYuQUdFTkNZX1ksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcmljZUlkID0gcHJpY2VNYXBbYCR7dGllcn06JHtpbnRlcnZhbH1gXTtcbiAgICAgIGlmICghcHJpY2VJZCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBvazogZmFsc2UsIFxuICAgICAgICAgIGVycm9yOiBgaW52YWxpZF9wbGFuOiAke3RpZXJ9OiR7aW50ZXJ2YWx9YCxcbiAgICAgICAgICBhdmFpbGFibGU6IE9iamVjdC5rZXlzKHByaWNlTWFwKS5maWx0ZXIoayA9PiBwcmljZU1hcFtrXSlcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RyaXBlID0gc3RyaXBlQ2xpZW50KGVudi5TRUNSRVQpO1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlOiBcInN1YnNjcmlwdGlvblwiLFxuICAgICAgICBsaW5lX2l0ZW1zOiBbeyBwcmljZTogcHJpY2VJZCwgcXVhbnRpdHk6IDEgfV0sXG4gICAgICAgIGFsbG93X3Byb21vdGlvbl9jb2RlczogdHJ1ZSxcbiAgICAgICAgc3Vic2NyaXB0aW9uX2RhdGE6IHtcbiAgICAgICAgICB0cmlhbF9wZXJpb2RfZGF5czogNyxcbiAgICAgICAgfSxcbiAgICAgICAgc3VjY2Vzc191cmw6IGAke2Vudi5TSVRFX1VSTH0vd2VsY29tZT9zZXNzaW9uX2lkPXtDSEVDS09VVF9TRVNTSU9OX0lEfWAsXG4gICAgICAgIGNhbmNlbF91cmw6IGAke2Vudi5TSVRFX1VSTH0vcHJpY2luZz9jYW5jZWxlZD0xYCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvazogdHJ1ZSwgdXJsOiBzZXNzaW9uLnVybCB9KTtcbiAgICB9XG5cbiAgICBpZiAocHVyY2hhc2VUeXBlID09PSBcImRmeVwiKSB7XG4gICAgICBjb25zdCBwYWNrID0gYm9keS5kZnlfcGFjayB8fCBcIlwiO1xuICAgICAgY29uc3QgZGZ5TWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+ID0ge1xuICAgICAgICBcImRmeV9zdGFydGVyXCI6ICAgICAgZW52LkRGWV9TVEFSVEVSLFxuICAgICAgICBcImRmeV9wcm9mZXNzaW9uYWxcIjogZW52LkRGWV9QUk9GRVNTSU9OQUwsXG4gICAgICAgIFwiZGZ5X2VudGVycHJpc2VcIjogICBlbnYuREZZX0VOVEVSUFJJU0UsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcmljZUlkID0gZGZ5TWFwW3BhY2tdO1xuICAgICAgaWYgKCFwcmljZUlkKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIG9rOiBmYWxzZSwgXG4gICAgICAgICAgZXJyb3I6IGBpbnZhbGlkX2RmeV9wYWNrOiAke3BhY2t9YCxcbiAgICAgICAgICBhdmFpbGFibGU6IE9iamVjdC5rZXlzKGRmeU1hcClcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RyaXBlID0gc3RyaXBlQ2xpZW50KGVudi5TRUNSRVQpO1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHN0cmlwZS5jaGVja291dC5zZXNzaW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlOiBcInBheW1lbnRcIixcbiAgICAgICAgbGluZV9pdGVtczogW3sgcHJpY2U6IHByaWNlSWQsIHF1YW50aXR5OiAxIH1dLFxuICAgICAgICBhbGxvd19wcm9tb3Rpb25fY29kZXM6IHRydWUsXG4gICAgICAgIHN1Y2Nlc3NfdXJsOiBgJHtlbnYuU0lURV9VUkx9L3dlbGNvbWU/c2Vzc2lvbl9pZD17Q0hFQ0tPVVRfU0VTU0lPTl9JRH0mdHlwZT1kZnlgLFxuICAgICAgICBjYW5jZWxfdXJsOiBgJHtlbnYuU0lURV9VUkx9L3ByaWNpbmc/Y2FuY2VsZWQ9MWAsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IHRydWUsIHVybDogc2Vzc2lvbi51cmwgfSk7XG4gICAgfVxuXG4gICAgaWYgKHB1cmNoYXNlVHlwZSA9PT0gXCJhZGRvbnNcIikge1xuICAgICAgY29uc3QgYWRkb24gPSB0eXBlb2YgYm9keS5hZGRvbnMgPT09IFwic3RyaW5nXCIgPyBib2R5LmFkZG9ucyA6IGJvZHkuYWRkb25zPy5bMF0gfHwgXCJcIjtcbiAgICAgIGNvbnN0IGFkZG9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+ID0ge1xuICAgICAgICBcImFkZG9uX3ByaW9yaXR5X3N1cHBvcnRcIjogZW52LkFERE9OX1BSSU9SSVRZX1NVUFBPUlQsXG4gICAgICAgIFwiYWRkb25fc2xhXzk5XCI6ICAgICAgICAgICBlbnYuQURET05fU0xBXzk5LFxuICAgICAgICBcImFkZG9uX3doaXRlX2xhYmVsXCI6ICAgICAgZW52LkFERE9OX1dISVRFX0xBQkVMLFxuICAgICAgICBcImFkZG9uX2V4dHJhX3dvcmtmbG93c1wiOiAgZW52LkFERE9OX0VYVFJBX1dPUktGTE9XUyxcbiAgICAgICAgXCJQUklPUklUWV9TVVBQT1JUXCI6ICAgICAgIGVudi5BRERPTl9QUklPUklUWV9TVVBQT1JULFxuICAgICAgICBcIlNMQV85OV85XCI6ICAgICAgICAgICAgICAgZW52LkFERE9OX1NMQV85OSxcbiAgICAgICAgXCJXSElURV9MQUJFTFwiOiAgICAgICAgICAgIGVudi5BRERPTl9XSElURV9MQUJFTCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByaWNlSWQgPSBhZGRvbk1hcFthZGRvbl07XG4gICAgICBpZiAoIXByaWNlSWQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgb2s6IGZhbHNlLCBcbiAgICAgICAgICBlcnJvcjogYGludmFsaWRfYWRkb246ICR7YWRkb259YCxcbiAgICAgICAgICBhdmFpbGFibGU6IE9iamVjdC5rZXlzKGFkZG9uTWFwKVxuICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdHJpcGUgPSBzdHJpcGVDbGllbnQoZW52LlNFQ1JFVCk7XG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc3RyaXBlLmNoZWNrb3V0LnNlc3Npb25zLmNyZWF0ZSh7XG4gICAgICAgIG1vZGU6IFwic3Vic2NyaXB0aW9uXCIsXG4gICAgICAgIGxpbmVfaXRlbXM6IFt7IHByaWNlOiBwcmljZUlkLCBxdWFudGl0eTogMSB9XSxcbiAgICAgICAgYWxsb3dfcHJvbW90aW9uX2NvZGVzOiB0cnVlLFxuICAgICAgICBzdWNjZXNzX3VybDogYCR7ZW52LlNJVEVfVVJMfS93ZWxjb21lP3Nlc3Npb25faWQ9e0NIRUNLT1VUX1NFU1NJT05fSUR9JnR5cGU9YWRkb25gLFxuICAgICAgICBjYW5jZWxfdXJsOiBgJHtlbnYuU0lURV9VUkx9L3ByaWNpbmc/Y2FuY2VsZWQ9MWAsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgb2s6IHRydWUsIHVybDogc2Vzc2lvbi51cmwgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBvazogZmFsc2UsIFxuICAgICAgZXJyb3I6IGB1bmtub3duX3B1cmNoYXNlX3R5cGU6ICR7cHVyY2hhc2VUeXBlfWAgXG4gICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcblxuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJjaGVja291dF9lcnJvclwiLCB7XG4gICAgICBtZXNzYWdlOiBlcnI/Lm1lc3NhZ2UsXG4gICAgICB0eXBlOiBlcnI/LnR5cGUsXG4gICAgICBjb2RlOiBlcnI/LmNvZGUsXG4gICAgICBwYXJhbTogZXJyPy5wYXJhbSxcbiAgICAgIHN0YXR1c0NvZGU6IGVycj8uc3RhdHVzQ29kZSxcbiAgICAgIHN0YWNrOiBlcnI/LnN0YWNrPy5zdWJzdHJpbmcoMCwgNTAwKVxuICAgIH0pO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgb2s6IGZhbHNlLCBcbiAgICAgIGVycm9yOiBgJHtlcnI/LnR5cGUgfHwgJ3Vua25vd24nfTogJHtlcnI/Lm1lc3NhZ2UgfHwgZXJyfWAsXG4gICAgICBkZWJ1ZzogeyBjb2RlOiBlcnI/LmNvZGUsIHBhcmFtOiBlcnI/LnBhcmFtIH1cbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiU3RyaXBlIiwiZHluYW1pYyIsInJlYWRFbnYiLCJTRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJTSVRFX1VSTCIsIlNUQVJURVJfTSIsIlNUUklQRV9QUklDRV9TVEFSVEVSIiwiU1RBUlRFUl9ZIiwiU1RSSVBFX1BSSUNFX1NUQVJURVJfWUVBUiIsIkxBVU5DSF9NIiwiU1RSSVBFX1BSSUNFX0xBVU5DSCIsIkxBVU5DSF9ZIiwiU1RSSVBFX1BSSUNFX0xBVU5DSF9ZRUFSIiwiR1JPV1RIX00iLCJTVFJJUEVfUFJJQ0VfR1JPV1RIIiwiR1JPV1RIX1kiLCJTVFJJUEVfUFJJQ0VfR1JPV1RIX1lFQVIiLCJBR0VOQ1lfTSIsIlNUUklQRV9QUklDRV9BR0VOQ1kiLCJBR0VOQ1lfWSIsIlNUUklQRV9QUklDRV9BR0VOQ1lfWUVBUiIsIkRGWV9TVEFSVEVSIiwiU1RSSVBFX1BSSUNFX0RGWV9TVEFSVEVSIiwiREZZX1BST0ZFU1NJT05BTCIsIlNUUklQRV9QUklDRV9ERllfUFJPRkVTU0lPTkFMIiwiREZZX0VOVEVSUFJJU0UiLCJTVFJJUEVfUFJJQ0VfREZZX0VOVEVSUFJJU0UiLCJBRERPTl9QUklPUklUWV9TVVBQT1JUIiwiU1RSSVBFX1BSSUNFX0FERE9OX1BSSU9SSVRZX1NVUFBPUlQiLCJBRERPTl9TTEFfOTkiLCJTVFJJUEVfUFJJQ0VfQURET05fU0xBXzk5IiwiQURET05fV0hJVEVfTEFCRUwiLCJTVFJJUEVfUFJJQ0VfQURET05fV0hJVEVfTEFCRUwiLCJBRERPTl9FWFRSQV9XT1JLRkxPV1MiLCJTVFJJUEVfUFJJQ0VfQURET05fRVhUUkFfV09SS0ZMT1dTIiwic3RyaXBlQ2xpZW50Iiwic2VjcmV0IiwiRXJyb3IiLCJhcGlWZXJzaW9uIiwiR0VUIiwicmVxdWlyZWQiLCJtaXNzaW5nIiwiZmlsdGVyIiwiayIsImpzb24iLCJvayIsImxlbmd0aCIsIlBPU1QiLCJyZXEiLCJlcnJvciIsInN0YXR1cyIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsInB1cmNoYXNlVHlwZSIsInB1cmNoYXNlX3R5cGUiLCJ0aWVyIiwicGxhbiIsImludGVydmFsIiwiYmlsbGluZ19pbnRlcnZhbCIsInRlcm0iLCJwcmljZU1hcCIsInByaWNlSWQiLCJhdmFpbGFibGUiLCJPYmplY3QiLCJrZXlzIiwic3RyaXBlIiwic2Vzc2lvbiIsImNoZWNrb3V0Iiwic2Vzc2lvbnMiLCJjcmVhdGUiLCJtb2RlIiwibGluZV9pdGVtcyIsInByaWNlIiwicXVhbnRpdHkiLCJhbGxvd19wcm9tb3Rpb25fY29kZXMiLCJzdWJzY3JpcHRpb25fZGF0YSIsInRyaWFsX3BlcmlvZF9kYXlzIiwic3VjY2Vzc191cmwiLCJjYW5jZWxfdXJsIiwidXJsIiwicGFjayIsImRmeV9wYWNrIiwiZGZ5TWFwIiwiYWRkb24iLCJhZGRvbnMiLCJhZGRvbk1hcCIsImVyciIsIm1lc3NhZ2UiLCJ0eXBlIiwiY29kZSIsInBhcmFtIiwic3RhdHVzQ29kZSIsInN0YWNrIiwic3Vic3RyaW5nIiwiZGVidWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/checkout/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/stripe","vendor-chunks/@opentelemetry","vendor-chunks/next","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/qs","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/object-inspect","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/side-channel","vendor-chunks/side-channel-weakmap","vendor-chunks/side-channel-map","vendor-chunks/side-channel-list","vendor-chunks/hasown","vendor-chunks/get-intrinsic","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/call-bound"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcheckout%2Froute&page=%2Fapi%2Fcheckout%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcheckout%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace%2Flevqor-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();