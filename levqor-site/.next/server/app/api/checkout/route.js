"use strict";(()=>{var e={};e.id=1607,e.ids=[1607],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},21764:e=>{e.exports=require("util")},38441:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>w,patchFetch:()=>I,requestAsyncStorage:()=>f,routeModule:()=>P,serverHooks:()=>S,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{GET:()=>R,POST:()=>y,dynamic:()=>l});var o=t(49303),i=t(88716),n=t(60670),a=t(87070),p=t(91988);let u={starter:{id:"starter",name:"Starter",description:"Perfect for individuals getting started with automation",trial:!0,prices:{month:9,year:90},limits:{workflows:5,runs:"2,000",speed:"Standard",users:1,connectors:"Core only",aiCredits:"1,000",support:"Email (48h)"},features:["5 workflows","2,000 runs/mo","1 user","Core connectors","1,000 AI credits","Email support (48h)","7-day free trial"],stripePriceEnvKeys:{month:"STRIPE_PRICE_STARTER",year:"STRIPE_PRICE_STARTER_YEAR"}},launch:{id:"launch",name:"Launch",description:"For growing teams ready to scale their automation",badge:"Most Popular",trial:!0,prices:{month:29,year:290},limits:{workflows:20,runs:"10,000",speed:"Fast",users:3,connectors:"Core + Beta",aiCredits:"5,000",support:"Priority Email (24h)"},features:["20 workflows","10,000 runs/mo","3 users","Core + Beta connectors","5,000 AI credits","Priority email (24h)","7-day free trial"],stripePriceEnvKeys:{month:"STRIPE_PRICE_LAUNCH",year:"STRIPE_PRICE_LAUNCH_YEAR"}},growth:{id:"growth",name:"Growth",description:"For teams requiring advanced automation capabilities",trial:!0,prices:{month:59,year:590},limits:{workflows:100,runs:"50,000",speed:"Faster",users:5,connectors:"All (incl. Beta)",aiCredits:"20,000",support:"Priority (12h)"},features:["100 workflows","50,000 runs/mo","5 users","All connectors","20,000 AI credits","Priority support (12h)","7-day free trial"],stripePriceEnvKeys:{month:"STRIPE_PRICE_GROWTH",year:"STRIPE_PRICE_GROWTH_YEAR"}},agency:{id:"agency",name:"Agency",description:"Enterprise-grade automation for agencies and large teams",badge:"Best Value",trial:!0,prices:{month:149,year:1490},limits:{workflows:500,runs:"250,000",speed:"Fastest",users:10,connectors:"All + SSO",aiCredits:"100,000",support:"4-hr SLA"},features:["500 workflows","250,000 runs/mo","10 users","All connectors + SSO","100,000 AI credits","4-hour SLA support","7-day free trial"],stripePriceEnvKeys:{month:"STRIPE_PRICE_AGENCY",year:"STRIPE_PRICE_AGENCY_YEAR"}}},c={dfy_starter:{id:"dfy_starter",name:"DFY Starter",price:149,features:["Complete workflow setup","Basic automation templates","Email integration","1-hour consultation","2 weeks support"],stripePriceEnvKey:"STRIPE_PRICE_DFY_STARTER"},dfy_professional:{id:"dfy_professional",name:"DFY Professional",badge:"Popular",price:299,features:["Advanced workflow setup","Custom automation design","Multiple integrations","2-hour consultation","1 month priority support","Documentation included"],stripePriceEnvKey:"STRIPE_PRICE_DFY_PROFESSIONAL"},dfy_enterprise:{id:"dfy_enterprise",name:"DFY Enterprise",price:499,features:["Enterprise workflow setup","Complex automation systems","Unlimited integrations","4-hour consultation","3 months premium support","Full documentation & training","Dedicated account manager"],stripePriceEnvKey:"STRIPE_PRICE_DFY_ENTERPRISE"}},d={addon_priority_support:{id:"addon_priority_support",name:"Priority Support",description:"Get faster responses and higher priority in our support queue",price:29,stripePriceEnvKey:"STRIPE_PRICE_ADDON_PRIORITY_SUPPORT"},addon_sla_99:{id:"addon_sla_99",name:"SLA 99.9%",description:"99.9% uptime guarantee with SLA commitment and monitoring",price:49,stripePriceEnvKey:"STRIPE_PRICE_ADDON_SLA_99"},addon_white_label:{id:"addon_white_label",name:"White Label",description:"Remove Levqor branding and use your own custom brand",price:99,stripePriceEnvKey:"STRIPE_PRICE_ADDON_WHITE_LABEL"},addon_extra_workflows:{id:"addon_extra_workflows",name:"Extra Workflow Pack",description:"Add +50 extra workflow capacity to your current plan",price:10,stripePriceEnvKey:"STRIPE_PRICE_ADDON_EXTRA_WORKFLOWS"}};["starter","launch","growth","agency"].map(e=>u[e]),["dfy_starter","dfy_professional","dfy_enterprise"].map(e=>c[e]),["addon_priority_support","addon_sla_99","addon_white_label","addon_extra_workflows"].map(e=>d[e]);let l="force-dynamic";function _(e){return process.env[e]}function E(){let e=_("STRIPE_SECRET_KEY");if(!e)throw Error("missing STRIPE_SECRET_KEY");return new p.Z(e,{apiVersion:"2024-06-20"})}function m(){return _("SITE_URL")||"https://www.levqor.ai"}async function R(){let e=["STRIPE_SECRET_KEY","STRIPE_PRICE_STARTER","STRIPE_PRICE_STARTER_YEAR","STRIPE_PRICE_LAUNCH","STRIPE_PRICE_LAUNCH_YEAR"].filter(e=>!_(e));return a.NextResponse.json({ok:0===e.length,missing:e})}async function y(e){try{if(!_("STRIPE_SECRET_KEY"))return a.NextResponse.json({ok:!1,error:"missing_env:SECRET"},{status:500});let s=await e.json(),o=s.purchase_type||"subscription";if("subscription"===o){var r,t;let e=(s.tier||s.plan||"starter").toLowerCase(),o=(r=s.billing_interval,t=s.term,"year"===r||"yearly"===t?"year":"month");if(!(e in u))return a.NextResponse.json({ok:!1,error:`invalid_tier: ${e}`,available:Object.keys(u)},{status:400});let i=u[e].stripePriceEnvKeys[o],n=_(i);if(!n)return a.NextResponse.json({ok:!1,error:`missing_env: ${i}`},{status:500});let p=E(),c=await p.checkout.sessions.create({mode:"subscription",line_items:[{price:n,quantity:1}],allow_promotion_codes:!0,subscription_data:{trial_period_days:7},success_url:`${m()}/welcome?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${m()}/pricing?canceled=1`});return a.NextResponse.json({ok:!0,url:c.url})}if("dfy"===o){let e=s.dfy_pack||"";if(!(e in c))return a.NextResponse.json({ok:!1,error:`invalid_dfy_pack: ${e}`,available:Object.keys(c)},{status:400});let r=c[e],t=_(r.stripePriceEnvKey);if(!t)return a.NextResponse.json({ok:!1,error:`missing_env: ${r.stripePriceEnvKey}`},{status:500});let o=E(),i=await o.checkout.sessions.create({mode:"payment",line_items:[{price:t,quantity:1}],allow_promotion_codes:!0,success_url:`${m()}/welcome?session_id={CHECKOUT_SESSION_ID}&type=dfy`,cancel_url:`${m()}/pricing?canceled=1`});return a.NextResponse.json({ok:!0,url:i.url})}if("addons"===o){let e="string"==typeof s.addons?s.addons:s.addons?.[0]||"",r={PRIORITY_SUPPORT:"addon_priority_support",SLA_99_9:"addon_sla_99",WHITE_LABEL:"addon_white_label"};if(e in r&&(e=r[e]),!(e in d))return a.NextResponse.json({ok:!1,error:`invalid_addon: ${e}`,available:Object.keys(d)},{status:400});let t=d[e],o=_(t.stripePriceEnvKey);if(!o)return a.NextResponse.json({ok:!1,error:`missing_env: ${t.stripePriceEnvKey}`},{status:500});let i=E(),n=await i.checkout.sessions.create({mode:"subscription",line_items:[{price:o,quantity:1}],allow_promotion_codes:!0,success_url:`${m()}/welcome?session_id={CHECKOUT_SESSION_ID}&type=addon`,cancel_url:`${m()}/pricing?canceled=1`});return a.NextResponse.json({ok:!0,url:n.url})}return a.NextResponse.json({ok:!1,error:`unknown_purchase_type: ${o}`},{status:400})}catch(e){return console.error("checkout_error",{message:e?.message,type:e?.type,code:e?.code,param:e?.param,statusCode:e?.statusCode,stack:e?.stack?.substring(0,500)}),a.NextResponse.json({ok:!1,error:`${e?.type||"unknown"}: ${e?.message||e}`,debug:{code:e?.code,param:e?.param}},{status:500})}}let P=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:"app/api/checkout/route"},resolvedPagePath:"/home/runner/workspace/levqor-site/src/app/api/checkout/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:S}=P,w="/api/checkout/route";function I(){return(0,n.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,7070,3059],()=>t(38441));module.exports=s})();